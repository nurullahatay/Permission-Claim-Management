<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<link rel="stylesheet"
	href="https://code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css">

<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
<meta charset="UTF-8">
<title>İzin Talebi</title>
</head>
<body>
	<form class="form-horizontal" name="izintalebi" action="izintalep"
		method="post">
		<fieldset>

			<!-- Form Name -->
			<legend>İzin Talebi</legend>

			<!-- Text input-->
			<div class="form-group">
				<label class="col-md-4 control-label" for="sicilno">Sicil No</label>
				<div class="col-md-4">
					<input id="sicilno" name="sicilno" placeholder=""
						class="form-control input-md" required="" type="text">

				</div>
			</div>
			
			<div class="form-group">
				<label class="col-md-4 control-label" for="datepicker">İzin başlangıç tarihi</label>
				<div class="col-md-4">
					<div class="datepicker">
						<input id="tarih" type="text">
						<!-- seçilen tarih GG-AA-YYYY şeklinde -->
						<input type="hidden" id="tarih-db" name="izinbaslangictarihi">
						<!-- mysql'e göre uyarlanan tarih YYYY-AA-GG şeklinde -->
					</div>
				</div>
			</div>
			
			<div class="form-group">
				<label class="col-md-4 control-label" for="datepicker">İzin bitiş tarihi</label>
				<div class="col-md-4">
					<div class="datepicker">
						<input id="tarih2" type="text">
						<!-- seçilen tarih GG-AA-YYYY şeklinde -->
						<input type="hidden" id="tarih-db2" name="izinbitistarihi">
						<!-- mysql'e göre uyarlanan tarih YYYY-AA-GG şeklinde -->
					</div>
				</div>
			</div>
			
			<div class="form-group">
				<label class="col-md-4 control-label" for="izinnedeni">Gün</label>
				<div class="col-md-4">
					<input type="text" id="dif" name="gun" readonly size="1" placeholder="hesaplamak için tıklayınız" class="form-control input-md" type="text">

				</div>
			</div>
			
			
			<script>$(document).ready(function(){
	$('#dif').mouseenter(function(){
  var d1 = $('#tarih-db').val();
  var d2 = $('#tarih-db2').val();
		$('#dif').val(workingDaysBetweenDates(d1,d2));
	});
});

function workingDaysBetweenDates(d0, d1) {
	var holidays = ['2016-05-03','2016-05-05'];
    var startDate = parseDate(d0);
    var endDate = parseDate(d1);  
    // Validate input
    if (endDate < startDate) {
        return 0;
    }
    // Calculate days between dates
    var millisecondsPerDay = 86400 * 1000; // Day in milliseconds
    startDate.setHours(0,0,0,1);  // Start just after midnight
    endDate.setHours(23,59,59,999);  // End just before midnight
    var diff = endDate - startDate;  // Milliseconds between datetime objects    
    var days = Math.ceil(diff / millisecondsPerDay);
    
    // Subtract two weekend days for every week in between
    var weeks = Math.floor(days / 7);
    days -= weeks * 2;

    // Handle special cases
    var startDay = startDate.getDay();
    var endDay = endDate.getDay();
    
    // Remove weekend not previously removed.   
    if (startDay - endDay > 1) {
        days -= 2;
    }
    // Remove start day if span starts on Sunday but ends before Saturday
    if (startDay == 0 && endDay != 6) {
        days--;  
    }
    // Remove end day if span ends on Saturday but starts after Sunday
    if (endDay == 6 && startDay != 0) {
        days--;
    }
    /* Here is the code */
    for (var i in holidays) {
      if ((holidays[i] >= d0) && (holidays[i] <= d1)) {
      	days--;
      }
    }
    return days;
}
           
function parseDate(input) {
	// Transform date from text to date
  var parts = input.match(/(\d+)/g);
  // new Date(year, month [, date [, hours[, minutes[, seconds[, ms]]]]])
  return new Date(parts[0], parts[1]-1, parts[2]); // months are 0-based
}</script>
			<!-- Text input-->
			<div class="form-group">
				<label class="col-md-4 control-label" for="izinnedeni">İzin
					Nedeni</label>
				<div class="col-md-4">
					<input id="izinnedeni" name="izinnedeni" placeholder=""
						class="form-control input-md" type="text">

				</div>
			</div>
			<!-- Textarea -->
			<div class="form-group">
				<label class="col-md-4 control-label" for="textarea">Açıklama</label>
				<div class="col-md-4">
					<textarea class="form-control" id="textarea" name="aciklama"></textarea>
				</div>
			</div>




			<script>
				$(function() {
					$("#tarih").datepicker(
							{
								beforeShowDay : $.datepicker.noWeekends,
								dateFormat : "dd-mm-yy",
								altFormat : "yy-mm-dd",
								altField : "#tarih-db",
								monthNames : [ "Ocak", "Şubat", "Mart",
										"Nisan", "Mayıs", "Haziran", "Temmuz",
										"Ağustos", "Eylül", "Ekim", "Kasım",
										"Aralık" ],
								dayNamesMin : [ "Pa", "Pt", "Sl", "Ça", "Pe",
										"Cu", "Ct" ],
								firstDay : 1,
							});
				});
			</script>
			<script>
				$(function() {
					$("#tarih2").datepicker(
							{
								beforeShowDay : $.datepicker.noWeekends,
								dateFormat : "dd-mm-yy",
								altFormat : "yy-mm-dd",
								altField : "#tarih-db2",
								monthNames : [ "Ocak", "Şubat", "Mart",
										"Nisan", "Mayıs", "Haziran", "Temmuz",
										"Ağustos", "Eylül", "Ekim", "Kasım",
										"Aralık" ],
								dayNamesMin : [ "Pa", "Pt", "Sl", "Ça", "Pe",
										"Cu", "Ct" ],
								firstDay : 1,
							});
				});
			</script>

			<!-- Button -->
			<div class="form-group">
				<label class="col-md-4 control-label" for="singlebutton"></label>
				<div class="col-md-4">
					<input type="submit" value="Submit">
				</div>
			</div>

		</fieldset>
	</form>

</body>
</html>